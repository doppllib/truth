//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel-doppl/truth/core/src/main/java/com/google/common/truth/FailureStrategy.java
//

#include "ComGoogleCommonTruthFailureStrategy.h"
#include "ComGoogleCommonTruthStringUtil.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/AssertionError.h"
#include "java/lang/CharSequence.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/StackTraceElement.h"
#include "java/util/Arrays.h"

@interface ComGoogleCommonTruthFailureStrategy ()

+ (void)stripTruthStackFramesWithNSException:(NSException *)throwable;

@end

__attribute__((unused)) static void ComGoogleCommonTruthFailureStrategy_stripTruthStackFramesWithNSException_(NSException *throwable);

@implementation ComGoogleCommonTruthFailureStrategy

- (void)failWithNSString:(NSString *)message {
  [self failWithNSString:message withNSException:nil];
}

- (void)failWithNSString:(NSString *)message
         withNSException:(NSException *)cause {
  JavaLangAssertionError *up = create_JavaLangAssertionError_initWithId_(message);
  if (cause == nil) {
    cause = create_JavaLangAssertionError_initWithId_(message);
  }
  @try {
    [up initCauseWithNSException:cause];
  }
  @catch (JavaLangIllegalStateException *alreadyInitializedBecauseOfHarmonyBug) {
    @throw create_JavaLangAssertionError_initWithId_(cause);
  }
  ComGoogleCommonTruthFailureStrategy_stripTruthStackFramesWithNSException_(up);
  @throw up;
}

- (void)failComparingWithNSString:(NSString *)message
         withJavaLangCharSequence:(id<JavaLangCharSequence>)expected
         withJavaLangCharSequence:(id<JavaLangCharSequence>)actual {
  [self failWithNSString:ComGoogleCommonTruthStringUtil_messageForWithNSString_withJavaLangCharSequence_withJavaLangCharSequence_(message, expected, actual)];
}

+ (void)stripTruthStackFramesWithNSException:(NSException *)throwable {
  ComGoogleCommonTruthFailureStrategy_stripTruthStackFramesWithNSException_(throwable);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ComGoogleCommonTruthFailureStrategy_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 3, 4, -1, -1, -1, -1 },
    { NULL, "V", 0xa, 5, 6, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(failWithNSString:);
  methods[1].selector = @selector(failWithNSString:withNSException:);
  methods[2].selector = @selector(failComparingWithNSString:withJavaLangCharSequence:withJavaLangCharSequence:);
  methods[3].selector = @selector(stripTruthStackFramesWithNSException:);
  methods[4].selector = @selector(init);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "fail", "LNSString;", "LNSString;LNSException;", "failComparing", "LNSString;LJavaLangCharSequence;LJavaLangCharSequence;", "stripTruthStackFrames", "LNSException;" };
  static const J2ObjcClassInfo _ComGoogleCommonTruthFailureStrategy = { "FailureStrategy", "com.google.common.truth", ptrTable, methods, NULL, 7, 0x401, 5, 0, -1, -1, -1, -1, -1 };
  return &_ComGoogleCommonTruthFailureStrategy;
}

@end

void ComGoogleCommonTruthFailureStrategy_stripTruthStackFramesWithNSException_(NSException *throwable) {
  ComGoogleCommonTruthFailureStrategy_initialize();
  IOSObjectArray *stackTrace = [((NSException *) nil_chk(throwable)) getStackTrace];
  jint i = 0;
  while (i < ((IOSObjectArray *) nil_chk(stackTrace))->size_ && [((NSString *) nil_chk([((JavaLangStackTraceElement *) nil_chk(IOSObjectArray_Get(stackTrace, i))) getClassName])) hasPrefix:@"com.google.common.truth"]) {
    i++;
  }
  [throwable setStackTraceWithJavaLangStackTraceElementArray:JavaUtilArrays_copyOfRangeWithNSObjectArray_withInt_withInt_(stackTrace, i, stackTrace->size_)];
}

void ComGoogleCommonTruthFailureStrategy_init(ComGoogleCommonTruthFailureStrategy *self) {
  NSObject_init(self);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoogleCommonTruthFailureStrategy)
